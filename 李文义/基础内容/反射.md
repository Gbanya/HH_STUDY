Java程序在运行状态可以动态的获取类的所有属性和方法，并实例化该类，调用方法的功能。换言之，Java可以加载一个运行时才得知名称的class，获得其完整结构。

反射获取Class对象实现方式
第一种：通过Class.forName方式
public class ReflectGetClass {
    public static void main(String[] args) throws Exception {
        Class reflect= Class.forName("com.sefonsoft.ReflectGetClass");
        Object object = reflect.newInstance(); //调用空参构造器，没有则会报错
        Method method = reflect.getDeclaredMethod("run");
        method.invoke(object);
    }
    public void run(){
        System.out.println("run");
    }
}

前两行实现了类的装载、链接和初始化（newInstance方法实际上也是使用反射调用了<init>方法），后两行实现了从class对象中获取到method对象然后执行反射调用。

第二种：通过Object类的getClass方法
public class ReflectGetClass {
    public static void main(String[] args) throws Exception {
        ReflectGetClass reflectGetClass = new ReflectGetClass();
        Class reflect = reflectGetClass.getClass();
        Object object = reflect.newInstance();
        Method method = reflect.getDeclaredMethod("run");
        method.invoke(object);
    }
    public void run(){
        System.out.println("run");
    }
}


第三种：通过对象实例方法获取对象
public class ReflectGetClass {
    public static void main(String[] args) throws Exception {
        Class reflect = ReflectGetClass.class;
        Object object = reflect.newInstance();
        Method method = reflect.getDeclaredMethod("run");
        method.invoke(object);
    }
    public void run(){
        System.out.println("run");
    }
}


Class类的newInstance()方法是使用该类无参的构造函数创建对象, 如果一个类没有无参的构造函数，就不能这样创建了，可以调用Class类的getConstructor (String.class,int.class)方法获取一个指定的构造函数然后再调用Constructor类的newInstance，实例如下：
public class ReflectGetClass {

    private int num;

    public int getNum() {
        return num;
    }

    public void setNum(int num) {
        this.num = num;
    }

    public ReflectGetClass(int num) {
        this.num = num;
    }

    public static void main(String[] args) throws Exception {
        Class reflect = Class
            .forName("com.sefonsoft.reflection.ReflectGetClass");
        Constructor constructor = reflect.getConstructor(int.class);
        ReflectGetClass reflectGetClass1 = 
            (ReflectGetClass) constructor.newInstance(5);
        reflectGetClass1.run(reflectGetClass1.getNum());
    }
    
    public void run(int num){
        System.out.println(num+"---run");
    }
}



getDeclaredMethod和getMethod的区别
getDeclaredMethod：获取当前类的所有声明的方法，包括public、protected、default和private修饰的方法。需要注意的是，这些方法一定是在当前类中声明的，从父类中继承的不算，实现接口的方法由于有声明所以包括在内。

getMethod：获取当前类和父类的所有public的方法。这里的父类，指的是继承层次中的所有父类。比如说，A继承B，B继承C，那么B和C都属于A的父类。
