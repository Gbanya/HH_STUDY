### 3.3.6 Set集合

java.util.Set接口 extends Collection

#### 一、HashSet概述

**Set****接口**的特点：
   1.不允许存储重复的元素；
   2.没有索引，没有带索引的方法，也不能使用普通的for循环；
 
 java.util.HashSet集合 implements Set接口
 **HashSet****集合**的特点：
   1.不允许存储重复的元素；
   2.没有索引，没有带索引的方法，也不能使用普通的for循环；
   3.是一个无序的集合，存储元素和取出元素的顺序可能不一致；
   4.底层是一个哈希表结构（查询速度非常的快）。

 

#### 二、哈希值

哈希值：是一个十进制的整数，由系统随机给定（就是对象的地址值，是一个逻辑地址，是模拟出来的，不是数据实际存储的地址）
 int hashCode() 返回该对象的哈希码值。
 hashCode方法的源码：
 public native int hashCode();native代表该方法调用的是本地操作系统的方法。

 

```
//String类的哈希值：String类重写了Object类的HashCode方法
String str1 = new String("abc");
String str2 = new String("abc");
System.out.println(str1.hashCode());//96354
System.out.println(str2.hashCode());//96354

System.out.println("通话".hashCode());//1179395
System.out.println("重地".hashCode());//1179395
```

 

#### 三、HashSet集合存储数据的结构

HashSet集合存储数据的结构（哈希表）：

JDK1.8版本之前：哈希表=数组+链表

JDK1.8版本之后：哈希表=数组+链表；

​               哈希表=数组+红黑树（提高查询的速度）

哈希表的特点：速度快

 

数组结构：把元素进行了分组（相同哈希值的元素是一组）

链表/红黑树：把相同哈希值的元素连接到一起

如果链表的长度超过了8位，那么就会把链表转换为红黑树（提高查询速度）

​                               

 

#### 四、Set集合不允许存储重复元素的原理

Set集合在调用add方法时，add方法会调用元素的hashCode方法和equals方法，判断元素是否重复。

```
//创建HashSet集合对象
HashSet<String> set = new HashSet<>();
String s1 = new String("abc");
String s2 = new String("abc");
set.add(s1);
set.add(s2);
set.add("重地");
set.add("通话");
System.out.println(set);//[重地, 通话, abc]
```

 

#### 五、HashSet存储自定义类型元素

Set集合报错元素唯一：
   存储的元素（String,Integer,...,Student,Person...），必须重写hashCode方法和equals方法
 
 要求：同名同年龄的人，视为同一人，只能存储一次

 

 

#### 六、LinkedHahSet集合

java.util.LinkedHashSet集合 extends HashSet集合
 LinkedHashSet集合特点：
   底层是一个哈希表（数组+链表/红黑树）+链表：多了一条链表，记录元素存储顺序，保证元素有序。（有序，不允许重复）

 

#### 七、可变参数

可变参数是JDK1.5后出现的新特性。
 （一）使用前提：
   当方法的参数列表数据类型已经确定，参数的个数不确定，就可以使用可变参数。
 使用格式：定义方法时使用。
   **修饰符** **返回值类型** **方法名（数据类型 ...****变量名）{ }
** （二）原理：底层是一个数组，根据传递参数个数不同，会创建不同长度的数组来存储这些参数。它传递的参数个数可以是0个（不传递），1,2...多个。
 （三）注意事项：
   1.一个方法的参数列表，只能有一个可变参数。
   2.如果方法的参数有多个，那么可变参数必须写在参数列表的末尾。
 可变参数的特殊写法（终极写法）：
   ***修饰符\*** ***返回值\*** ***方法名称(Object ... obj){ }
\*** 
 （三）定义一个方法计算（0-n）个int数据的和。
 三要素：
 返回值：int
 方法名称：add
 参数列表：不确定，使用可变参数
 add():就会创建一个长度为0的数组，new int[0]
 add(10):就会创建一个长度为1的数组，new int[]{10}
 add(10,20):就会创建一个长度为2的数组，new int[]{10,20}

```
public static int add(int... arr) {
    //定义一个初始化变量，记录累加求和
    int sum=0;
    //遍历数组，获取数组元素
    for (int i : arr) {
        sum+=i;
    }
    //返回求和结果
    return sum;
}
```