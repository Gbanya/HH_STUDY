### 3.2.4 多态

#### 一、概述

面向对象三大特性：封装性、继承性、多态性。

extend继承或者implement实现，是多态性的前提。

 

多态是：对象的多态性。

​                               

 

#### 二、多态的格式和使用

代码中体现多态性，其实就是一句话：父类引用指向子类对象。
 
 格式：（左父右子）*
\* *父类名称* *对象名 = new* *子类名称();
\* *接口名称* *对象名 = new* *实现类名称();*

 

#### 三、多态中成员变量的访问特点

访问成员变量的两种方式：
 1.直接通过对象名称访问成员变量：看等号左边是谁，优先用谁，没有则向上找。
 2.间接通过成员方法访问成员变量。看该方法属于谁，则优先用谁，没有则向上找。

```
//使用多态创建对象
 Fu obj=new Zi();

 //1.直接通过对象名称访问成员变量
 //看等号左边是谁Fu obj
 System.out.println(obj.num);   //10

 //2.通过成员方法访问成员变量
 //子类没有覆盖重写，就直接找到父类中的方法
// obj.showNum();   //10

 //子类如果覆盖重写，就在子类中找到方法，20
 obj.showNum();  //20
```

 

#### 四、多态中成员方法的使用特点

```
在多态的代码中，成员方法的访问规则是：
看new的是谁，就优先用谁，没有则向上找。

口诀：编译看左边，运行看右边。
Fu obj=new Zi();

//父子都有method，new的是Zi，则优先用子类方法
obj.method();  //子类方法！

//子类没有，则向上找
obj.methodFu(); //父类专有方法！

//编译看左边，左边是Fu,Fu中没有methodZi方法，所以编译报错
//obj.methodZi();  报错
```


 对比一下：
 成员变量：编译看左边，运行还看左边。
 成员方法：编译看左边，运行看右边。

 

#### 五、使用多态的好处

无论右边new的是哪个子类对象，等号左边调用方法都不会变化。

 

 

#### 六、对象的向上转型和向下转型

1、对象的向上转型，其实就是多态写法。

*格式：父类名称* *对象名 = new* *子类名称;*   

含义：创建一个子类对象，把它当做父类来看待实用。

注意事项：向上转型一定是安全的。从小范围转向了大范围（类似于数据类型自动转换）

 

向上转型一定是安全的、正确的。但是也有一个弊端。
 对象一旦向上转型为父类，那么久无法调用子类原本特有的内容。
 
 解决方案：对象的向下转型（还原）

 

 

2、对象的向下转型，其实是一个【还原】动作。

格式：*子类名称* *对象名 =**（子类名称）父类对象;*

含义：将父类对象，【还原】成为本来的子类对象。

 

 

 

```
//对象的向上转型，父类引用指向子类对象
Animal animal = new Cat();  //本来是猫，向上转型为“动物”
animal.eat();   //猫吃鱼！
//animal.catchMouse(); //报错，向上转型后无法使用子类中特有的内容

//向下转型  子类名称 对象名 =（子类名称）父类对象;
Cat cat = (Cat) animal;  //本来是猫，已经被当做动物了，向下还原成为本类的猫
cat.catchMOouse();       //猫抓老鼠！

//错误的向下转型
//本来new的时候是一只猫，现在非要转成狗
//java.lang.ClassCastException
//Dog dog = (Dog) animal; //错误写法！编译不会报错，但运行出现异常
```

 

#### 七、Instanceof关键字

如何才能知道一个父类引用的对象，本来是什么类？
 *格式：对象 instanceof* *类名称*
 这将会得到一个boolean结果，也就是判断前面的对象能不能当做后面类型的实例。

```
public static void giveMeAPet(Animal animal){
    if (animal instanceof Cat) {
        Cat cat = (Cat) animal;
        cat.catchMOouse();
    }

    if (animal instanceof Dog) {
        Dog dog = (Dog) animal;
        dog.watchHouse();
    }
}
 
```

#### 八、笔记本USB接口案例分析（Multi_day071304）

 

 

 