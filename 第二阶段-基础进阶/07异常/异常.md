#### 异常

1. 异常

   - 程序执行过程中出现非正常的情况
   - 异常本身就是一个类，处理异常的方式是中断处理
   - error 错误：工程师不能处理，只能尽量避免**。只能修改源代码**
   - exception异常：编译期异常，使用不当导致，是可以避免的**，**这种异常必须处理**（要么throws，要么try...catch）；**RuntimeException:程序运行过程中出现的问题**，这个可以不处理
2. throw关键字

   - 可以在指定的方法中抛出指定的异常

   - 格式：throw new xxxException（"异常产生的原因"）

   - 注意：必须写在方法的内部，对线必须是异常或者异常的子类；如果是运行时异常可以交给虚拟机处理；如果是编译期异常，必须处理，要么throws，要么try...catch

   - ##### **工作中首先必须对方法传递过来的参数进行合法校验，如果不符合要求，必须进行异常处理！！！**

3. Objects类有一些静态方法，比如**查看指定引用对象是不是null**

   ```java
   public static void main(String[] args) {
           method(null);
       }
   
       public static void method(Object obj) {
   //        if (obj == null) {
   //          throw new NullPointerException("传递的对象是null");
   //      }
             Objects.requireNonNull(obj,"空");
       }
   ```

4. 声明异常Throws

   - 异常处理的第一种方式：会抛出给方法的调用者，自己不处理，最终给JVM中断处理，在方法声明时使用；

   - **如果调用了一个声明抛出异常的方法，就必须处理声明的异常，要么继续throws，要么try...catch自己处理**

     ```java
     public static void main(String[] args) throws FileNotFoundException {
             method("xxx");
         }
     
         public static void method(String Filename) throws FileNotFoundException {
             //编译期异常必须处理
             if(!Filename.equals("c:/a.txt"))
             throw new FileNotFoundException("传递的文件路径不正确");
     //        Objects.requireNonNull(obj,"空");
         }
     ```

5. try...catch捕获异常

   - 异常处理的第二种方式：自己处理异常；一个try后面可以有多个catch(多个异常)；执行完catch后可以继续执行（与throws不同）

   - 一个try后面可以有多个catch，catch里面定义的异常变量，如果有子父类关系，子类必须写在上面

     ```java
      public static void main(String[] args)  {
             try {
                 method("xxx");
             } catch (FileNotFoundException e) {
                 System.out.println("传递的文件后缀名不是.txt");
             }
             System.out.println("后续代码");
         }
     
         public static void method(String Filename) throws FileNotFoundException {
             if(!Filename.equals("c:/a.txt")) {
                 throw new FileNotFoundException("传递的文件路径不正确");
             }
     ```

6. throwable类定义的三个异常处理方法

   - getMessage() 返回此throwable的简短描述

     ```java
      try {
                 method("xxx");
             } catch (FileNotFoundException e) {
     			String message = e.getMessage();
                 System.out.println(message);
             }
     ```

   - toString() 返回此throwable的详细消息字符串

     ```java
             try {
                 method("xxx");
             } catch (FileNotFoundException e) {
                 String s = e.toString();
                 System.out.println(s);
             }
     ```

   - printStackTrace() JVM打印异常，信息最全面

7. Finally代码块

   - 必须和try代码块一起使用，无论是否出现异常都会实现，一般用于资源释放（IO流就需要）

8. 异常注意事项：

   - 如果finally有return语句，永远会返回这个结果，应该避免这种情况
   - 如果父类抛出多个异常，子类重写父类该方法时（父类异常什么样，子类就什么样）
   - 如果父类方法没有抛出异常，子类也不可以抛出，此时子类产生异常只能捕获处理不可以抛出

9. 自定义异常类：自己定义一个类继承Exception或者RuntimeException