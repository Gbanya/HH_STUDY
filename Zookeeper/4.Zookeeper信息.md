## Zookeeper信息

#### 节点信息

| 名称           | 说明                                                         |
| -------------- | ------------------------------------------------------------ |
| cZxid          | 创建该节点所分配的全局事务id                                 |
| ctime          | 创建时间                                                     |
| mZxid          | 更新该节点数据所分配的全局事务id                             |
| mtime          | 更新时间                                                     |
| pZxid          | 子节点的最新事务id                                           |
| cversion       | 子节点版本，表示对子节点的更改次数                           |
| dataversion    | 数据版本，数据每发生一次变化，数据版本增加1                  |
| aclVersion     | ACL的更新次数，实际上是权限更新的次数                        |
| ephemeralOwner | 如果不是临时节点，则此值为0；如果是临时节点，则此值是其会话id |
| dataLength     | 数据的字节个数                                               |
| numChildren    | 子节点的个数                                                 |

#### 事务日志

##### 概述

1. 事务日志指Zookeeper系统在正常运行过程中，针对所有的事务操作，在返回客户端ACK的响应前，Zookeeper会保证已经将本次更新操作的事务日志已经写到磁盘上
2. Zookeeper的事务日志为二进制文件，不能通过vim等工具直接访问。其实可以通过zookeeper自带的jar包读取事务日志文件

##### 查看事务log

1. 进入Zookeeper的安装目录的lib目录下：cd zookeeper-3.4.8/lib
2. 将lib目录下的slf4j-api-1.6.1.jar复制到数据目录的version-2目录下：cp     slf4j-api-1.6.1.jar ../tmp/version-2/
3. 回到Zookeeper的安装目录：cd ..
4. 将Zookeeper的安装目录下的zookeeper-3.4.8.jar复制到数据目录下的version-2目录下：cp     zookeeper-3.4.8.jar tmp/version-2/
5. 进入数据目录下的version-2目录下：cd tmp/version-2/
6. 执行： java -cp     .:zookeeper-3.4.8.jar:slf4j-api-1.6.1.jar     org.apache.zookeeper.server.LogFormatter ./log.100000001
             查看日志文件

#### 快照

##### 概述

1. 快照指Zookeeper系统在所存储的部分节点信息写到了磁盘上。
2. Zookeeper的快照文件为二进制文件，不能通过vim等工具直接访问。其实可以通过Zookeeper自带的jar包读取事务日志文件

##### 查看快照文件

1. 进入Zookeeper的安装目录的lib目录下：cd zookeeper-3.4.8/lib
2. 将lib目录下的slf4j-api-1.6.1.jar复制到数据目录的version-2目录下：cp     slf4j-api-1.6.1.jar ../tmp/version-2/
3. 回到Zookeeper的安装目录：cd ..
4. 将Zookeeper的安装目录下的zookeeper-3.4.8.jar复制到数据目录下的version-2目录下：cp     zookeeper-3.4.8.jar tmp/version-2/
5. 进入数据目录下的version-2目录下：cd tmp/version-2/
6. 执行： java -cp     .:zookeeper-3.4.8.jar:slf4j-api-1.6.1.jar     org.apache.zookeeper.server.SnapshotFormatter ./log.100000001查看快照文件